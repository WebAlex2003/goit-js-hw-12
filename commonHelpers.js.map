{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst pixabayApi = async (search_word, page = 1, per_page = 15) => {\n  const request_params = {\n    key: '44082104-13032bddabedf7f071f678933',\n    q: search_word,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  return await axios.get('', { params: request_params });\n};\n\nexport default pixabayApi;","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst images_element = document.querySelector('.images');\nconst loader_element = document.querySelector('#loader_place');\nconst load_more_form = document.querySelector('#load_more_form');\n\nconst lightbox = new SimpleLightbox('.images li a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nexport const loadStart = () => {\n  loader_element.innerHTML = '<span class=\"loader\"></span>';\n};\nexport const loadFinish = () => {\n  loader_element.innerHTML = '';\n};\n\nexport const displayLoadMore = () => {\n  load_more_form.classList.remove('visually-hidden');\n};\n\nexport const hideLoadMore = () => {\n  load_more_form.classList.add('visually-hidden');\n};\n\nexport const displayNoMoreForLoad = () => {\n  iziToast.info({\n    message: `We're sorry, but you've reached the end of search results!`,\n    position: 'topRight',\n  });\n};\n\nexport const scroll = () => {\n  const image_element = document.querySelector('.image');\n\n  if (image_element) {\n    const image_element_height = image_element.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: image_element_height * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nexport const renderImages = (data, new_request = true) => {\n  if (new_request) {\n    images_element.innerHTML = '';\n  }\n\n  if (data.hits.length === 0) {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please, try again!`,\n      position: 'topRight',\n    });\n  } else {\n    const image_elements = data.hits\n      .map(hit => {\n        return `<li class=\"image\">\n          <a href=\"${hit.largeImageURL}\"><img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"></a>\n          <ul class=\"info\">\n            <li class=\"info-block\">\n              <p3>Likes</p3>\n              <span>${hit.likes}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Views</p3>\n              <span>${hit.views}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Comments</p3>\n              <span>${hit.comments}</span>\n            </li>\n            <li class=\"info-block\">\n              <p3>Downloads</p3>\n              <span>${hit.downloads}</span>\n            </li>\n          </ul>\n        </li>`;\n      })\n      .join('');\n\n    images_element.innerHTML += image_elements;\n    lightbox.refresh();\n  }\n};","import pixabayApi from './js/pixabay-api.js';\nimport {\n  renderImages,\n  loadStart,\n  loadFinish,\n  displayLoadMore,\n  hideLoadMore,\n  displayNoMoreForLoad,\n  scroll,\n} from './js/render-function.js';\n\nconst search_form = document.querySelector('#search-form');\nconst load_more_form = document.querySelector('#load_more_form');\nconst per_page = 15;\n\nlet page = 1;\nlet search_value = '';\n\nconst get_new_images = (new_request = true) => {\n  hideLoadMore();\n  loadStart();\n\n  pixabayApi(search_value, page, per_page).then(response => {\n    const displayed_count = page * per_page;\n    const data = response.data;\n\n    loadFinish();\n    renderImages(data, new_request);\n\n    if (data.hits.length > 0 && data.totalHits > 0) {\n      if (displayed_count < data.totalHits) {\n        displayLoadMore();\n      } else {\n        displayNoMoreForLoad();\n      }\n\n      if (new_request) {\n        search_form.text.value = '';\n      }\n    }\n\n    if (!new_request) scroll();\n  });\n};\n\nconst search_action = event => {\n  event.preventDefault();\n\n  if (event.target.text.value.trim().length > 0) {\n    page = 1;\n    search_value = event.target.text.value.trim();\n    get_new_images();\n  }\n};\n\nconst load_more_action = event => {\n  page++;\n  event.preventDefault();\n  get_new_images(false);\n};\n\nsearch_form.addEventListener('submit', search_action);\nload_more_form.addEventListener('submit', load_more_action);\n"],"names":["axios","pixabayApi","search_word","page","per_page","request_params","images_element","loader_element","load_more_form","lightbox","SimpleLightbox","loadStart","loadFinish","displayLoadMore","hideLoadMore","displayNoMoreForLoad","iziToast","scroll","image_element","image_element_height","renderImages","data","new_request","image_elements","hit","search_form","search_value","get_new_images","response","displayed_count","search_action","event","load_more_action"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAa,MAAOC,EAAaC,EAAO,EAAGC,EAAW,KAAO,CACjE,MAAMC,EAAiB,CACrB,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAEE,OAAO,MAAMH,EAAM,IAAI,GAAI,CAAE,OAAQK,CAAc,CAAE,CACvD,ECVMC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAiB,SAAS,cAAc,iBAAiB,EAEzDC,EAAW,IAAIC,EAAe,eAAgB,CAClD,aAAc,IACd,aAAc,KAChB,CAAC,EAEYC,EAAY,IAAM,CAC7BJ,EAAe,UAAY,8BAC7B,EACaK,EAAa,IAAM,CAC9BL,EAAe,UAAY,EAC7B,EAEaM,EAAkB,IAAM,CACnCL,EAAe,UAAU,OAAO,iBAAiB,CACnD,EAEaM,EAAe,IAAM,CAChCN,EAAe,UAAU,IAAI,iBAAiB,CAChD,EAEaO,EAAuB,IAAM,CACxCC,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACd,CAAG,CACH,EAEaC,EAAS,IAAM,CAC1B,MAAMC,EAAgB,SAAS,cAAc,QAAQ,EAErD,GAAIA,EAAe,CACjB,MAAMC,EAAuBD,EAAc,sBAAqB,EAAG,OAEnE,OAAO,SAAS,CACd,IAAKC,EAAuB,EAC5B,SAAU,QAChB,CAAK,CACF,CACH,EAEaC,EAAe,CAACC,EAAMC,EAAc,KAAS,CAKxD,GAJIA,IACFhB,EAAe,UAAY,IAGzBe,EAAK,KAAK,SAAW,EACvBL,EAAS,MAAM,CACb,QAAS,4EACT,SAAU,UAChB,CAAK,MACI,CACL,MAAMO,EAAiBF,EAAK,KACzB,IAAIG,GACI;AAAA,qBACMA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,sBAIjEA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,sBAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,sBAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,sBAIZA,EAAI,SAAS;AAAA;AAAA;AAAA,cAI5B,EACA,KAAK,EAAE,EAEVlB,EAAe,WAAaiB,EAC5Bd,EAAS,QAAO,CACjB,CACH,EC/EMgB,EAAc,SAAS,cAAc,cAAc,EACnDjB,EAAiB,SAAS,cAAc,iBAAiB,EACzDJ,EAAW,GAEjB,IAAID,EAAO,EACPuB,EAAe,GAEnB,MAAMC,EAAiB,CAACL,EAAc,KAAS,CAC7CR,IACAH,IAEAV,EAAWyB,EAAcvB,EAAMC,CAAQ,EAAE,KAAKwB,GAAY,CACxD,MAAMC,EAAkB1B,EAAOC,EACzBiB,EAAOO,EAAS,KAEtBhB,IACAQ,EAAaC,EAAMC,CAAW,EAE1BD,EAAK,KAAK,OAAS,GAAKA,EAAK,UAAY,IACvCQ,EAAkBR,EAAK,UACzBR,IAEAE,IAGEO,IACFG,EAAY,KAAK,MAAQ,KAIxBH,GAAaL,GACtB,CAAG,CACH,EAEMa,EAAgBC,GAAS,CAC7BA,EAAM,eAAc,EAEhBA,EAAM,OAAO,KAAK,MAAM,KAAM,EAAC,OAAS,IAC1C5B,EAAO,EACPuB,EAAeK,EAAM,OAAO,KAAK,MAAM,KAAI,EAC3CJ,IAEJ,EAEMK,EAAmBD,GAAS,CAChC5B,IACA4B,EAAM,eAAc,EACpBJ,EAAe,EAAK,CACtB,EAEAF,EAAY,iBAAiB,SAAUK,CAAa,EACpDtB,EAAe,iBAAiB,SAAUwB,CAAgB"}